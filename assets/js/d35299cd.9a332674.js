"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4963],{3478:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>r,default:()=>s,frontMatter:()=>_,metadata:()=>c,toc:()=>l});var t=i(85893),d=i(11151);const _={sidebar_position:6},r="\u5b9e\u73b0\u6444\u50cf\u5934\u7684\u663e\u793a\u5c4f\u5b9e\u65f6\u9884\u89c8",c={id:"CanaanK230/part3/AchieveRealTimePreviewCameraDisplay",title:"\u5b9e\u73b0\u6444\u50cf\u5934\u7684\u663e\u793a\u5c4f\u5b9e\u65f6\u9884\u89c8",description:"\u786c\u4ef6\u8981\u6c42\uff1a",source:"@site/docs/CanaanK230/part3/06_AchieveRealTimePreviewCameraDisplay.md",sourceDirName:"CanaanK230/part3",slug:"/CanaanK230/part3/AchieveRealTimePreviewCameraDisplay",permalink:"/CanaanK230/part3/AchieveRealTimePreviewCameraDisplay",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/eLinuxAI-TrainingDocs/tree/main/docs/CanaanK230/part3/06_AchieveRealTimePreviewCameraDisplay.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"canaanK230Sidebar",previous:{title:"\u663e\u793a\u5c4f\u5b9e\u9a8c-\u663e\u793a\u4e0d\u540c\u5206\u8fa8\u7387\u56fe\u50cf",permalink:"/CanaanK230/part3/DisplayExperimentDifferentResolutions"},next:{title:"\u6444\u50cf\u5934\u5b9e\u9a8c-\u7f16\u7801\u89c6\u9891\u6d41",permalink:"/CanaanK230/part3/CameraExperimentEncodingVideoStream"}},o={},l=[{value:"1.\u6570\u636e\u6d41\u6846\u56fe",id:"1\u6570\u636e\u6d41\u6846\u56fe",level:2},{value:"2.\u5e94\u7528\u7a0b\u5e8f\u7f16\u8bd1",id:"2\u5e94\u7528\u7a0b\u5e8f\u7f16\u8bd1",level:2},{value:"2.1 \u65b0\u589e\u7a0b\u5e8f",id:"21-\u65b0\u589e\u7a0b\u5e8f",level:3},{value:"2.1.1 \u65b0\u5efa\u5de5\u7a0b\u6587\u4ef6\u5939",id:"211-\u65b0\u5efa\u5de5\u7a0b\u6587\u4ef6\u5939",level:4},{value:"2.1.2 \u4fee\u6539Makefile",id:"212-\u4fee\u6539makefile",level:4},{value:"2.1.3 \u8fdb\u5165\u5de5\u7a0b\u76ee\u5f55",id:"213-\u8fdb\u5165\u5de5\u7a0b\u76ee\u5f55",level:4},{value:"2.1.4 \u65b0\u5efa\u6e90\u7801\u6587\u4ef6",id:"214-\u65b0\u5efa\u6e90\u7801\u6587\u4ef6",level:4},{value:"2.1.5 \u65b0\u5efaMakefile\u6587\u4ef6",id:"215-\u65b0\u5efamakefile\u6587\u4ef6",level:4},{value:"2.2 \u7a0b\u5e8f\u7f16\u8bd1",id:"22-\u7a0b\u5e8f\u7f16\u8bd1",level:3},{value:"2.2 \u7a0b\u5e8f\u8fd0\u884c",id:"22-\u7a0b\u5e8f\u8fd0\u884c",level:3},{value:"3.\u7a0b\u5e8f\u89e3\u6790",id:"3\u7a0b\u5e8f\u89e3\u6790",level:2},{value:"3.1 \u8bbe\u7f6e\u6444\u50cf\u5934\u5c5e\u6027",id:"31-\u8bbe\u7f6e\u6444\u50cf\u5934\u5c5e\u6027",level:3},{value:"3.2 \u590d\u4f4d\u5e76\u8bbe\u7f6e\u663e\u793a\u8bbe\u5907",id:"32-\u590d\u4f4d\u5e76\u8bbe\u7f6e\u663e\u793a\u8bbe\u5907",level:3},{value:"3.3 \u8bbe\u7f6e\u6444\u50cf\u5934\u8f93\u51fa\u683c\u5f0f",id:"33-\u8bbe\u7f6e\u6444\u50cf\u5934\u8f93\u51fa\u683c\u5f0f",level:3},{value:"3.4 \u6839\u636esensor\u914d\u7f6e\u83b7\u53d6sensor\u4fe1\u606f",id:"34-\u6839\u636esensor\u914d\u7f6e\u83b7\u53d6sensor\u4fe1\u606f",level:3},{value:"3.5 \u83b7\u53d6\u6444\u50cf\u5934\u8f93\u5165\u5bbd\u9ad8",id:"35-\u83b7\u53d6\u6444\u50cf\u5934\u8f93\u5165\u5bbd\u9ad8",level:3},{value:"3.6 \u8bbe\u7f6eVI\u8bbe\u5907\u5c5e\u6027",id:"36-\u8bbe\u7f6evi\u8bbe\u5907\u5c5e\u6027",level:3},{value:"3.7\u8bbe\u7f6eVI\u9ed8\u8ba4\u8f93\u51fa\u5c5e\u6027",id:"37\u8bbe\u7f6evi\u9ed8\u8ba4\u8f93\u51fa\u5c5e\u6027",level:3},{value:"3.8 VO\u8bbe\u5907\u521d\u59cb\u5316",id:"38-vo\u8bbe\u5907\u521d\u59cb\u5316",level:3},{value:"3.8.1 \u83b7\u53d6\u8fde\u63a5\u5668\u5c5e\u6027",id:"381-\u83b7\u53d6\u8fde\u63a5\u5668\u5c5e\u6027",level:4},{value:"3.8.2 \u83b7\u53d6\u8fde\u63a5\u5668\u8bbe\u5907\u8282\u70b9",id:"382-\u83b7\u53d6\u8fde\u63a5\u5668\u8bbe\u5907\u8282\u70b9",level:4},{value:"3.8.3 \u6253\u5f00connector \u7684\u7535\u6e90",id:"383-\u6253\u5f00connector-\u7684\u7535\u6e90",level:4},{value:"3.8.4 \u521d\u59cb\u5316\u8fde\u63a5\u5668\u8bbe\u5907",id:"384-\u521d\u59cb\u5316\u8fde\u63a5\u5668\u8bbe\u5907",level:4},{value:"3.9 \u914d\u7f6e\u7f13\u51b2\u533a",id:"39-\u914d\u7f6e\u7f13\u51b2\u533a",level:3},{value:"3.9.1 \u8bbe\u7f6e\u89c6\u9891\u7f13\u51b2\u6c60\u5c5e\u6027",id:"391-\u8bbe\u7f6e\u89c6\u9891\u7f13\u51b2\u6c60\u5c5e\u6027",level:4},{value:"3.9.2 \u8bbe\u7f6e\u7f13\u51b2\u6c60\u9644\u52a0\u4fe1\u606f",id:"392-\u8bbe\u7f6e\u7f13\u51b2\u6c60\u9644\u52a0\u4fe1\u606f",level:4},{value:"3.9.3 \u521d\u59cb\u5316\u89c6\u9891\u7f13\u51b2\u6c60",id:"393-\u521d\u59cb\u5316\u89c6\u9891\u7f13\u51b2\u6c60",level:4},{value:"3.10 \u5141\u8bb8VI\u901a\u9053dump",id:"310-\u5141\u8bb8vi\u901a\u9053dump",level:3},{value:"3.11 \u8bbe\u7f6eVI\u901a\u9053\u5c5e\u6027",id:"311-\u8bbe\u7f6evi\u901a\u9053\u5c5e\u6027",level:3},{value:"3.12 \u83b7\u53d6\u8fde\u63a5\u5668\u4fe1\u606f",id:"312-\u83b7\u53d6\u8fde\u63a5\u5668\u4fe1\u606f",level:3},{value:"3.13 \u7ed1\u5b9aVI\u548cVO\u901a\u9053",id:"313-\u7ed1\u5b9avi\u548cvo\u901a\u9053",level:3},{value:"3.14 \u8bbe\u7f6e\u56fe\u5c42\u4fe1\u606f",id:"314-\u8bbe\u7f6e\u56fe\u5c42\u4fe1\u606f",level:3},{value:"3.15 \u56fe\u5c42\u521d\u59cb\u5316",id:"315-\u56fe\u5c42\u521d\u59cb\u5316",level:3},{value:"3.15.1 \u8bbe\u7f6e\u65cb\u8f6c\u5c5e\u6027",id:"3151-\u8bbe\u7f6e\u65cb\u8f6c\u5c5e\u6027",level:4},{value:"3.15.2 \u8bbe\u7f6e\u56fe\u5c42\u5c5e\u6027",id:"3152-\u8bbe\u7f6e\u56fe\u5c42\u5c5e\u6027",level:4},{value:"3.16 VI\u8bbe\u5907\u521d\u59cb\u5316",id:"316-vi\u8bbe\u5907\u521d\u59cb\u5316",level:3},{value:"3.17 \u542f\u52a8VI\u8bbe\u5907",id:"317-\u542f\u52a8vi\u8bbe\u5907",level:3}];function a(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"\u5b9e\u73b0\u6444\u50cf\u5934\u7684\u663e\u793a\u5c4f\u5b9e\u65f6\u9884\u89c8",children:"\u5b9e\u73b0\u6444\u50cf\u5934\u7684\u663e\u793a\u5c4f\u5b9e\u65f6\u9884\u89c8"}),"\n",(0,t.jsx)(e.p,{children:"\u786c\u4ef6\u8981\u6c42\uff1a"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"DshanPI-CanMV\u5f00\u53d1\u677f"}),"\n",(0,t.jsx)(e.li,{children:"GC2093\u6444\u50cf\u5934"}),"\n",(0,t.jsx)(e.li,{children:"Type-C\u6570\u636e\u7ebf x2"}),"\n",(0,t.jsx)(e.li,{children:"MIPI\u663e\u793a\u5c4f/HDMI\u663e\u793a\u5c4f"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u5f00\u53d1\u73af\u5883\uff1a"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Ubuntu20.04"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["\u914d\u5957\u6e90\u7801\uff1a",(0,t.jsx)(e.a,{href:"https://pan.baidu.com/s/1VBd0n3FKO0bj8yHOWk4HEw?pwd=ov5d",children:"https://pan.baidu.com/s/1VBd0n3FKO0bj8yHOWk4HEw?pwd=ov5d"})," \u63d0\u53d6\u7801\uff1aov5d"]}),"\n",(0,t.jsxs)(e.p,{children:["\u5177\u4f53\u4f4d\u7f6e\uff1a ",(0,t.jsx)(e.code,{children:"12_\u591a\u5a92\u4f53\u5e94\u7528\u793a\u4f8b\u6e90\u7801\\05_sample_vivo*"})]}),"\n",(0,t.jsx)(e.h2,{id:"1\u6570\u636e\u6d41\u6846\u56fe",children:"1.\u6570\u636e\u6d41\u6846\u56fe"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"image-20241024154139615",src:i(95111).Z+"",width:"634",height:"86"})}),"\n",(0,t.jsx)(e.p,{children:"\u6444\u50cf\u5934\u91c7\u96c6\u6570\u636e\u540e\uff0c\u9001\u81f3\u663e\u793a\u5c4f\u8bbe\u5907\u5bf9\u5e94\u7684\u56fe\u5c42\u4e2d\u663e\u793a\u3002"}),"\n",(0,t.jsx)(e.h2,{id:"2\u5e94\u7528\u7a0b\u5e8f\u7f16\u8bd1",children:"2.\u5e94\u7528\u7a0b\u5e8f\u7f16\u8bd1"}),"\n",(0,t.jsx)(e.h3,{id:"21-\u65b0\u589e\u7a0b\u5e8f",children:"2.1 \u65b0\u589e\u7a0b\u5e8f"}),"\n",(0,t.jsx)(e.h4,{id:"211-\u65b0\u5efa\u5de5\u7a0b\u6587\u4ef6\u5939",children:"2.1.1 \u65b0\u5efa\u5de5\u7a0b\u6587\u4ef6\u5939"}),"\n",(0,t.jsx)(e.p,{children:"\u5728k230_sdk/src/big/mpp/userapps/sample\u76ee\u5f55\u4e0b\u65b0\u5efa\u5de5\u7a0b"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"mkdir sample_vivo_100ask\n"})}),"\n",(0,t.jsx)(e.h4,{id:"212-\u4fee\u6539makefile",children:"2.1.2 \u4fee\u6539Makefile"}),"\n",(0,t.jsx)(e.p,{children:"\u4fee\u6539k230_sdk/src/big/mpp/userapps/sample\u76ee\u5f55\u4e0b\u7684Makefile\u6587\u4ef6\uff0c\u65b0\u589esample_vivo_100ask\u5de5\u7a0b\u7684\u7f16\u8bd1\u89c4\u5219"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"@cd sample_vivo_100ask; make || exit 1\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"image-20241024154944074",src:i(26447).Z+"",width:"1491",height:"438"})}),"\n",(0,t.jsx)(e.p,{children:"\u65b0\u589esample_vivo_100ask\u5de5\u7a0b\u7684\u6e05\u7406\u89c4\u5219\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"@cd sample_vivo_100ask; make clean\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"image-20241024155054677",src:i(33687).Z+"",width:"1372",height:"569"})}),"\n",(0,t.jsx)(e.h4,{id:"213-\u8fdb\u5165\u5de5\u7a0b\u76ee\u5f55",children:"2.1.3 \u8fdb\u5165\u5de5\u7a0b\u76ee\u5f55"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"cd sample_vivo_100ask\n"})}),"\n",(0,t.jsx)(e.h4,{id:"214-\u65b0\u5efa\u6e90\u7801\u6587\u4ef6",children:"2.1.4 \u65b0\u5efa\u6e90\u7801\u6587\u4ef6"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"vi sample_vivo_100ask.c\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u586b\u5165\u6e90\u7801\u3002"}),"\n",(0,t.jsx)(e.h4,{id:"215-\u65b0\u5efamakefile\u6587\u4ef6",children:"2.1.5 \u65b0\u5efaMakefile\u6587\u4ef6"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"vi Makefiel\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u586b\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'include $(MPP_SRC_DIR)/userapps/sample/mpp.mk\ninclude $(MPP_SRC_DIR)/userapps/sample/rt-smart.mk\n\nCURRECT_DIR_NAME=$(shell basename `pwd`)\nLOCAL_SRC_DIR = $(shell pwd)\nBIN = $(MPP_SRC_DIR)/userapps/sample/elf/$(CURRECT_DIR_NAME).elf\nLIBPATH = $(MPP_LIB_PATH)\nLIBS = $(MPP_LIBS)\n\nLOCAL_CFLAGS = -I$(LOCAL_SRC_DIR) \\\n\nSRCS = $(wildcard $(LOCAL_SRC_DIR)/*.c)\\\n\n\nOBJS = $(patsubst %.c,%.o,$(SRCS))\n\nall: $(BIN)\n\t@-rm -f $(OBJS)\n\t@echo "${PWD}/Makefile all"\n\n$(OBJS): %.o : %.c\n\t@echo CC $@\n\t@$(CC) $(CC_CFLAGS) $(LOCAL_CFLAGS) $(BSP_CFLGAS) $(RTSMART_CFLAGS) $(MPP_USER_CFLGAS) -c $< -o $@\n\n$(BIN): $(OBJS)\n\t@echo LD $@\n\t@$(CC) -o $(BIN) $(LINKFLAG) -Wl,--whole-archive -Wl,--no-whole-archive -n --static $(OBJS) -L$(LIBPATH) -Wl,--start-group $(LIBS) -Wl,--end-group\n\nclean:\n\techo "${PWD}/Makefile clean"\n\t-rm -rf $(BIN)\n\t-rm -f $(OBJS)\n\n.PHONY: all clean\n'})}),"\n",(0,t.jsx)(e.h3,{id:"22-\u7a0b\u5e8f\u7f16\u8bd1",children:"2.2 \u7a0b\u5e8f\u7f16\u8bd1"}),"\n",(0,t.jsx)(e.p,{children:"1.\u8fdb\u5165K230SDK\u76ee\u5f55"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"cd ~/k230_sdk\n"})}),"\n",(0,t.jsx)(e.p,{children:"2.\u4e0b\u8f7dtoolchain\u548c\u51c6\u5907\u6e90\u7801"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"source tools/get_download_url.sh && make prepare_sourcecode\n"})}),"\n",(0,t.jsx)(e.p,{children:"3.\u6302\u8f7d\u5de5\u5177\u94fe\u76ee\u5f55"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"sudo mount --bind $(pwd)/toolchain /opt/toolchain\n"})}),"\n",(0,t.jsx)(e.p,{children:"4.\u914d\u7f6e\u677f\u7ea7\u578b\u53f7"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"make CONF=k230_canmv_dongshanpi_defconfig prepare_memory\t\n"})}),"\n",(0,t.jsx)(e.p,{children:"5.\u7f16\u8bd1\u7a0b\u5e8f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"make mpp-apps\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u7b49\u5f85\u7f16\u8bd1\u5b8c\u6210\uff0c\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u53ef\u6267\u884c\u7a0b\u5e8f",(0,t.jsx)(e.code,{children:"sample_vivo_100ask.elf"}),"\u4f1a\u751f\u6210\u5728",(0,t.jsx)(e.code,{children:"k230_sdk/src/big/mpp/userapps/sample/elf"}),"\u76ee\u5f55\u4e0b\u3002"]}),"\n",(0,t.jsx)(e.p,{children:"\u4f7f\u7528ADB\u5c06\u53ef\u6267\u884c\u7a0b\u5e8f\u4f20\u8f93\u81f3\u5f00\u53d1\u677f\u4e2d"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"adb push src/big/mpp/userapps/sample/elf/sample_vivo_100ask.elf /sharefs/app\n"})}),"\n",(0,t.jsx)(e.h3,{id:"22-\u7a0b\u5e8f\u8fd0\u884c",children:"2.2 \u7a0b\u5e8f\u8fd0\u884c"}),"\n",(0,t.jsx)(e.p,{children:"\u4f7f\u7528\u4e32\u53e3\u8f6f\u4ef6\u8bbf\u95ee\u5f00\u53d1\u677f\u7684\u5927\u6838\u4e32\u53e3\u7ec8\u7aef\u3002"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\u5982\u679c\u6ca1\u6709\u5173\u95ed\u5f00\u673a\u81ea\u542f\u7a0b\u5e8f\uff0c\u53ef\u6309\u4e0bq+\u56de\u8f66\u952e\u53ef\u9000\u51fa\u5f00\u673a\u81ea\u542f\u7a0b\u5e8f\u3002"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"1.\u8fdb\u5165\u53ef\u6267\u884c\u6587\u4ef6\u76ee\u5f55"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"cd /sharefs/app\n"})}),"\n",(0,t.jsx)(e.p,{children:"2.\u8fd0\u884c\u7a0b\u5e8f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"./sample_vivo_100ask.elf -dev 0\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u6267\u884c\u5b8c\u6210\u540e\u6548\u679c\u5982\u4e0b\u6240\u793a:"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"image-20241024155902343",src:i(48997).Z+"",width:"2048",height:"685"})}),"\n",(0,t.jsx)(e.p,{children:"\u6b64\u65f6\u53ef\u4ee5\u770b\u5230\u663e\u793a\u5c4f\u5b9e\u65f6\u663e\u793a\u6444\u50cf\u5934\u6355\u83b7\u6570\u636e\u3002"}),"\n",(0,t.jsx)(e.h2,{id:"3\u7a0b\u5e8f\u89e3\u6790",children:"3.\u7a0b\u5e8f\u89e3\u6790"}),"\n",(0,t.jsx)(e.h3,{id:"31-\u8bbe\u7f6e\u6444\u50cf\u5934\u5c5e\u6027",children:"3.1 \u8bbe\u7f6e\u6444\u50cf\u5934\u5c5e\u6027"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'        chn_count = 0;\n        cur_dev =  atoi(argv[2]);;\n        printf("cur_dev(%d), dev_count(%d)\\n", cur_dev, dev_count);\n        \n        device_obj[cur_dev].dev_num = cur_dev; //sensor\u8bbe\u5907\u53f7\n        device_obj[cur_dev].dev_enable = K_TRUE; //\u662f\u5426\u542f\u7528\u8bbe\u5907\n        device_obj[cur_dev].ae_enable = K_TRUE;//default enable ae \u81ea\u52a8\u66dd\u5149\n        device_obj[cur_dev].awb_enable = K_TRUE;//default enable awb \u81ea\u52a8\u767d\u5e73\u8861\n        device_obj[cur_dev].dnr3_enable = K_FALSE;//default disable 3ndr 3D\u964d\u566a\n        device_obj[cur_dev].hdr_enable = K_FALSE;//default disable hdr \u9ad8\u52a8\u6001\u8303\u56f4\n        device_obj[cur_dev].dw_enable = K_FALSE;//default disable dw \u5bbd\u52a8\u6001\u6a21\u5f0f\n        \n        //parse dev paramters\n        printf("cur_chn(%d), chn_count(%d)\\n", cur_chn ,chn_count); \n        device_obj[cur_dev].chn_num[cur_chn] = cur_chn; //VI\u901a\u9053\u7684\u7f16\u53f7\n        device_obj[cur_dev].chn_enable[cur_chn] = K_TRUE; //\u662f\u5426\u542f\u52a8\u901a\u9053\n        device_obj[cur_dev].preview[cur_chn] = K_TRUE;//default enable preview \u901a\u9053\u7684\u9884\u89c8\u529f\u80fd\n        device_obj[cur_dev].sensor_type =  GC2093_MIPI_CSI2_1920X1080_30FPS_10BIT_LINEAR;//\u4f20\u611f\u5668\u7c7b\u578b\n'})}),"\n",(0,t.jsx)(e.h3,{id:"32-\u590d\u4f4d\u5e76\u8bbe\u7f6e\u663e\u793a\u8bbe\u5907",children:"3.2 \u590d\u4f4d\u5e76\u8bbe\u7f6e\u663e\u793a\u8bbe\u5907"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    // rst display subsystem\n    kd_display_reset();\n\n    connector_type = ILI9806_MIPI_2LAN_480X800_30FPS;\n    printf("connector_type = ILI9806_MIPI_2LAN_480X800_30FPS;");\n'})}),"\n",(0,t.jsx)(e.h3,{id:"33-\u8bbe\u7f6e\u6444\u50cf\u5934\u8f93\u51fa\u683c\u5f0f",children:"3.3 \u8bbe\u7f6e\u6444\u50cf\u5934\u8f93\u51fa\u683c\u5f0f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"    k_u16 out_width = 800;\n    out_width = VICAP_ALIGN_UP(out_width, 16);\n    device_obj[cur_dev].out_win[cur_chn ].width = out_width;\n    k_u16 out_height = 480;\n    // out_height = VICAP_ALIGN_UP(out_height, 16);\n    device_obj[cur_dev].out_win[cur_chn].height = out_height;\n    \n    int dev_num = 0;\n    dev_attr.input_type = VICAP_INPUT_TYPE_SENSOR;//\u8f93\u5165\u7c7b\u578b\u4e3asensor\u6570\u636e \n"})}),"\n",(0,t.jsx)(e.h3,{id:"34-\u6839\u636esensor\u914d\u7f6e\u83b7\u53d6sensor\u4fe1\u606f",children:"3.4 \u6839\u636esensor\u914d\u7f6e\u83b7\u53d6sensor\u4fe1\u606f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    ret = kd_mpi_vicap_get_sensor_info(device_obj[dev_num].sensor_type, &device_obj[dev_num].sensor_info);\n    if (ret) {\n        printf("sample_vicap, the sensor type not supported!\\n");\n        return ret;\n    }\n    memcpy(&dev_attr.sensor_info, &device_obj[dev_num].sensor_info, sizeof(k_vicap_sensor_info));\n'})}),"\n",(0,t.jsx)(e.h3,{id:"35-\u83b7\u53d6\u6444\u50cf\u5934\u8f93\u5165\u5bbd\u9ad8",children:"3.5 \u83b7\u53d6\u6444\u50cf\u5934\u8f93\u5165\u5bbd\u9ad8"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:' device_obj[dev_num].in_width = device_obj[dev_num].sensor_info.width; //1920\n    device_obj[dev_num].in_height = device_obj[dev_num].sensor_info.height; //1080\n\n    printf("sample_vicap, dev[%d] in size[%dx%d]\\n", \\\n        dev_num, device_obj[dev_num].in_width, device_obj[dev_num].in_height);\n'})}),"\n",(0,t.jsx)(e.h3,{id:"36-\u8bbe\u7f6evi\u8bbe\u5907\u5c5e\u6027",children:"3.6 \u8bbe\u7f6eVI\u8bbe\u5907\u5c5e\u6027"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    //vicap device attr set \u8bbe\u7f6eVI\u8bbe\u5907\u5c5e\u6027\n    dev_attr.acq_win.h_start = 0; //\u91c7\u96c6\u7a97\u53e3\u7684\u6c34\u5e73\u8d77\u59cb\u4f4d\u7f6e\n    dev_attr.acq_win.v_start = 0; //\u91c7\u96c6\u7a97\u53e3\u7684\u5782\u76f4\u8d77\u59cb\u4f4d\u7f6e\n    dev_attr.acq_win.width = device_obj[dev_num].in_width; //\u91c7\u96c6\u7a97\u53e3\u7684\u5bbd\u5ea6\n    dev_attr.acq_win.height = device_obj[dev_num].in_height; //\u91c7\u96c6\u7a97\u53e3\u7684\u9ad8\u5ea6\n    dev_attr.mode = VICAP_WORK_ONLINE_MODE; //\u8bbe\u5907\u5de5\u4f5c\u6a21\u5f0f\u4e3a\u5728\u7ebf\u6a21\u5f0f\n\n    dev_attr.pipe_ctrl.data = pipe_ctrl; //\u8bbe\u7f6eISP\u76f8\u5173\u63a7\u5236\u6570\u636e\n    dev_attr.pipe_ctrl.bits.af_enable = 0; //\u7981\u7528\u81ea\u52a8\u5bf9\u7126\n    dev_attr.pipe_ctrl.bits.ae_enable = device_obj[dev_num].ae_enable;\n    dev_attr.pipe_ctrl.bits.awb_enable = device_obj[dev_num].awb_enable;\n    dev_attr.pipe_ctrl.bits.dnr3_enable = device_obj[dev_num].dnr3_enable;\n    dev_attr.pipe_ctrl.bits.ahdr_enable = device_obj[dev_num].hdr_enable;\n\n    dev_attr.cpature_frame = 0; //\u6355\u83b7\u5e27\u6570\n    dev_attr.dw_enable = device_obj[dev_num].dw_enable;\n\n    dev_attr.mirror = device_obj[cur_dev].sensor_mirror; //\u8bbe\u7f6e\u955c\u50cf\u6a21\u5f0f\u4e3a\u8bbe\u5907\u5bf9\u8c61\u4e2d\u7684\u4f20\u611f\u5668\u955c\u50cf\u6a21\u5f0f\n\n    ret = kd_mpi_vicap_set_dev_attr(dev_num, dev_attr);//\u8bbe\u7f6eVICAP\u8bbe\u5907\u5c5e\u6027\n    if (ret) {\n        printf("sample_vicap, kd_mpi_vicap_set_dev_attr failed.\\n");\n        return ret;\n    }\n'})}),"\n",(0,t.jsx)(e.h3,{id:"37\u8bbe\u7f6evi\u9ed8\u8ba4\u8f93\u51fa\u5c5e\u6027",children:"3.7\u8bbe\u7f6eVI\u9ed8\u8ba4\u8f93\u51fa\u5c5e\u6027"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    int chn_num = 0;\n    //set default value \u8bbe\u7f6e\u9ed8\u8ba4\u503c\n    if (!device_obj[dev_num].out_format[chn_num]) {\n        device_obj[dev_num].out_format[chn_num] = PIXEL_FORMAT_YUV_SEMIPLANAR_420; //\u6355\u83b7\u56fe\u50cf\u683c\u5f0f\u4e3aYUV420\n    }\n\n    \n    if (!device_obj[dev_num].out_win[chn_num].width) {\n        device_obj[dev_num].out_win[chn_num].width = device_obj[dev_num].in_width; //\u6355\u83b7\u56fe\u50cf\u5bbd\u5ea6\n    }\n\n    if (!device_obj[dev_num].out_win[chn_num].height) {\n        device_obj[dev_num].out_win[chn_num].height = device_obj[dev_num].in_height; //\u6355\u83b7\u56fe\u50cf\u9ad8\u5ea6\n    }\n    \n    if ( device_obj[dev_num].out_win[chn_num].h_start || device_obj[dev_num].out_win[chn_num].v_start) {\n        device_obj[dev_num].crop_enable[chn_num] = K_TRUE;\n    }\n\n    printf("sample_vicap, dev_num(%d), chn_num(%d), in_size[%dx%d], out_offset[%d:%d], out_size[%dx%d]\\n", \\\n        dev_num, chn_num, device_obj[dev_num].in_width, device_obj[dev_num].in_height, \\\n        device_obj[dev_num].out_win[chn_num].h_start, device_obj[dev_num].out_win[chn_num].v_start, \\\n        device_obj[dev_num].out_win[chn_num].width, device_obj[dev_num].out_win[chn_num].height);\n'})}),"\n",(0,t.jsx)(e.h3,{id:"38-vo\u8bbe\u5907\u521d\u59cb\u5316",children:"3.8 VO\u8bbe\u5907\u521d\u59cb\u5316"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    ret = sample_vicap_vo_init(connector_type);\n    if (ret) {\n        printf("sample_vicap_vo_init failed\\n");\n        return -1;\n    }\n'})}),"\n",(0,t.jsx)(e.h4,{id:"381-\u83b7\u53d6\u8fde\u63a5\u5668\u5c5e\u6027",children:"3.8.1 \u83b7\u53d6\u8fde\u63a5\u5668\u5c5e\u6027"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    ret = kd_mpi_get_connector_info(connector_type, &connector_info);\n    if (ret) {\n        printf("sample_vicap, the sensor type not supported!\\n");\n        return ret;\n    }\n'})}),"\n",(0,t.jsx)(e.h4,{id:"382-\u83b7\u53d6\u8fde\u63a5\u5668\u8bbe\u5907\u8282\u70b9",children:"3.8.2 \u83b7\u53d6\u8fde\u63a5\u5668\u8bbe\u5907\u8282\u70b9"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    connector_fd = kd_mpi_connector_open(connector_info.connector_name);\n    if (connector_fd < 0) {\n        printf("%s, connector open failed.\\n", __func__);\n        return K_ERR_VO_NOTREADY;\n    }\n'})}),"\n",(0,t.jsx)(e.h4,{id:"383-\u6253\u5f00connector-\u7684\u7535\u6e90",children:"3.8.3 \u6253\u5f00connector \u7684\u7535\u6e90"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"    kd_mpi_connector_power_set(connector_fd, 1);\n"})}),"\n",(0,t.jsx)(e.h4,{id:"384-\u521d\u59cb\u5316\u8fde\u63a5\u5668\u8bbe\u5907",children:"3.8.4 \u521d\u59cb\u5316\u8fde\u63a5\u5668\u8bbe\u5907"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"    kd_mpi_connector_init(connector_fd, connector_info);\n"})}),"\n",(0,t.jsx)(e.h3,{id:"39-\u914d\u7f6e\u7f13\u51b2\u533a",children:"3.9 \u914d\u7f6e\u7f13\u51b2\u533a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:' ret = sample_vicap_vb_init(device_obj);//\u914d\u7f6e\u7f13\u51b2\u533a\n    if (ret) {\n        printf("sample_vicap_vb_init failed\\n");\n        return -1;\n    }\n'})}),"\n",(0,t.jsx)(e.h4,{id:"391-\u8bbe\u7f6e\u89c6\u9891\u7f13\u51b2\u6c60\u5c5e\u6027",children:"3.9.1 \u8bbe\u7f6e\u89c6\u9891\u7f13\u51b2\u6c60\u5c5e\u6027"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    config.comm_pool[k].blk_cnt = VICAP_OUTPUT_BUF_NUM; //\u7f13\u51b2\u533a\u6570\u91cf\n    config.comm_pool[k].mode = VB_REMAP_MODE_NOCACHE; //\u65e0\u7f13\u5b58\u91cd\u6620\u5c04\n\n    k_u16 out_width = dev_obj[i].out_win[j].width; //\u8f93\u51fa\u5bbd\u5ea6\n    k_u16 out_height = dev_obj[i].out_win[j].height; //\u8f93\u51fa\u9ad8\u5ea6\n\n\n    config.comm_pool[k].blk_size = VICAP_ALIGN_UP((out_width * out_height * 3 / 2) + 4096, VICAP_ALIGN_1K);//\u8ba1\u7b97\u6bcf\u4e2a\u7f13\u51b2\u533a\u7684\u5927\u5c0f\uff0c\u5e76\u4e14\u8fdb\u884c\u5bf9\u9f50\n\n    dev_obj[i].buf_size[j] = config.comm_pool[k].blk_size;//\u6bcf\u4e2a\u7f13\u51b2\u533a\u5927\u5c0f\n    printf("%s, dev(%d) chn(%d) pool(%d) buf_size(%d) blk_cnt(%d)\\n", __func__, i, j, k ,dev_obj[i].buf_size[j], config.comm_pool[k].blk_cnt);\n    \n    ret = kd_mpi_vb_set_config(&config); //\u8bbe\u7f6eMPP\u89c6\u9891\u7f13\u5b58\u6c60\u5c5e\u6027\n'})}),"\n",(0,t.jsx)(e.h4,{id:"392-\u8bbe\u7f6e\u7f13\u51b2\u6c60\u9644\u52a0\u4fe1\u606f",children:"3.9.2 \u8bbe\u7f6e\u7f13\u51b2\u6c60\u9644\u52a0\u4fe1\u606f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    memset(&supplement_config, 0, sizeof(supplement_config));\n    supplement_config.supplement_config |= VB_SUPPLEMENT_JPEG_MASK;\n\n    ret = kd_mpi_vb_set_supplement_config(&supplement_config);\n    if (ret) {\n        printf("vb_set_supplement_config failed ret:%d\\n", ret);\n        return ret;\n    }\n'})}),"\n",(0,t.jsx)(e.h4,{id:"393-\u521d\u59cb\u5316\u89c6\u9891\u7f13\u51b2\u6c60",children:"3.9.3 \u521d\u59cb\u5316\u89c6\u9891\u7f13\u51b2\u6c60"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    ret = kd_mpi_vb_init();//\u521d\u59cb\u5316 MPP \u89c6\u9891\u7f13\u5b58\u6c60\n    if (ret) {\n        printf("vb_init failed ret:%d\\n", ret);\n        return ret;\n    }\n'})}),"\n",(0,t.jsx)(e.h3,{id:"310-\u5141\u8bb8vi\u901a\u9053dump",children:"3.10 \u5141\u8bb8VI\u901a\u9053dump"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"    kd_mpi_vicap_set_dump_reserved(dev_num, chn_num, K_TRUE);//\u8bbe\u7f6e\u662f\u5426\u5f00\u542f\u5feb\u901fdump \u6a21\u5f0f\n"})}),"\n",(0,t.jsx)(e.h3,{id:"311-\u8bbe\u7f6evi\u901a\u9053\u5c5e\u6027",children:"3.11 \u8bbe\u7f6eVI\u901a\u9053\u5c5e\u6027"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    memset(&chn_attr, 0, sizeof(k_vicap_chn_attr));\n\n    chn_attr.out_win.width = device_obj[dev_num].out_win[chn_num].width; //\u8bbe\u7f6e\u8f93\u51fa\u56fe\u50cf\u5bbd\u5ea6\n    chn_attr.out_win.height = device_obj[dev_num].out_win[chn_num].height; //\u8bbe\u7f6e\u8f93\u51fa\u56fe\u50cf\u9ad8\u5ea6\n\n    if (device_obj[dev_num].crop_enable[chn_num]) { //\u5982\u679c\u8bbe\u7f6e\u88c1\u526a\u53c2\u6570\n        chn_attr.crop_win.width = device_obj[dev_num].crop_win[chn_num].width;  //chn_attr.out_win;1166;// \n        chn_attr.crop_win.height = device_obj[dev_num].crop_win[chn_num].height; //1944;//\n        chn_attr.crop_win.h_start =device_obj[dev_num].out_win[chn_num].h_start;  //713;\n        chn_attr.crop_win.v_start =device_obj[dev_num].out_win[chn_num].v_start;  //0;//\n    } else {\n        chn_attr.crop_win.width = device_obj[dev_num].in_width;\n        chn_attr.crop_win.height = device_obj[dev_num].in_height;\n    }\n\n    chn_attr.scale_win = chn_attr.out_win;\n    chn_attr.crop_enable = device_obj[dev_num].crop_enable[chn_num];\n    chn_attr.scale_enable = K_FALSE; //\u7f29\u653e\u5173\u95ed\n    chn_attr.chn_enable = K_TRUE; //\u901a\u9053\u4f7f\u80fd\n\n    chn_attr.pix_format = device_obj[dev_num].out_format[chn_num];//\u56fe\u50cf\u683c\u5f0f\n    chn_attr.buffer_num = VICAP_OUTPUT_BUF_NUM;//\u7f13\u51b2\u533a\u6570\u91cf\n    chn_attr.buffer_size = device_obj[dev_num].buf_size[chn_num];//\u7f13\u51b2\u533a\u5927\u5c0f\n\n    printf("sample_vicap, set dev(%d) chn(%d) attr, buffer_size(%d), out size[%dx%d]\\n", \\\n        dev_num, chn_num, chn_attr.buffer_size, chn_attr.out_win.width, chn_attr.out_win.height);\n\n    printf("sample_vicap out_win h_start is %d ,v_start is %d \\n", chn_attr.out_win.h_start, chn_attr.out_win.v_start);\n\n    ret = kd_mpi_vicap_set_chn_attr(dev_num, chn_num, chn_attr);//\u8bbe\u7f6eVICAP\u8bbe\u5907\u901a\u9053\u5c5e\u6027\n'})}),"\n",(0,t.jsx)(e.h3,{id:"312-\u83b7\u53d6\u8fde\u63a5\u5668\u4fe1\u606f",children:"3.12 \u83b7\u53d6\u8fde\u63a5\u5668\u4fe1\u606f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    ret = kd_mpi_get_connector_info(connector_type, &connector_info);\n    if (ret) {\n        printf("sample_vicap, the sensor type not supported!\\n");\n        return ret;\n    }\n    display_width = connector_info.resolution.hdisplay;\n    display_height = connector_info.resolution.vdisplay;\n    display_width = VICAP_ALIGN_UP(display_width, 16);\n'})}),"\n",(0,t.jsx)(e.h3,{id:"313-\u7ed1\u5b9avi\u548cvo\u901a\u9053",children:"3.13 \u7ed1\u5b9aVI\u548cVO\u901a\u9053"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    k_s32 vo_chn = K_VO_DISPLAY_CHN_ID1;\n    k_vo_layer layer = K_VO_LAYER1;\n    k_u16 rotation = device_obj[dev_num].rotation[chn_num];\n    printf("sample_vicap, vo_count(%d), dev(%d) chn(%d) bind vo chn(%d) layer(%d) rotation(%d)\\n", vo_count, dev_num, chn_num, vo_chn, layer, rotation);\n    sample_vicap_bind_vo(dev_num, chn_num, vo_chn);\n'})}),"\n",(0,t.jsx)(e.h3,{id:"314-\u8bbe\u7f6e\u56fe\u5c42\u4fe1\u606f",children:"3.14 \u8bbe\u7f6e\u56fe\u5c42\u4fe1\u606f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"    layer_conf.enable[vo_count] = K_TRUE;\n    layer_conf.width[vo_count] = chn_attr.out_win.width;\n    layer_conf.height[vo_count] = chn_attr.out_win.height;\n    layer_conf.rotation[vo_count] = 1;\n    layer_conf.layer[vo_count] = layer;\n"})}),"\n",(0,t.jsx)(e.h3,{id:"315-\u56fe\u5c42\u521d\u59cb\u5316",children:"3.15 \u56fe\u5c42\u521d\u59cb\u5316"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    ret = sample_vicap_vo_layer_init(&layer_conf, display_width, display_height);\n    if (ret) {\n        printf("sample_vicap, vo layer init failed.\\n");\n        goto app_exit;\n    }\n'})}),"\n",(0,t.jsx)(e.h4,{id:"3151-\u8bbe\u7f6e\u65cb\u8f6c\u5c5e\u6027",children:"3.15.1 \u8bbe\u7f6e\u65cb\u8f6c\u5c5e\u6027"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    for (int i = 0; i < MAX_VO_LAYER_NUM; i++) {\n        if (layer_conf->enable[i]) {\n            rotation = layer_conf->rotation[i];\n            switch (rotation) {\n            case 0:\n                info[i].act_size.width = layer_conf->width[i];\n                info[i].act_size.height = layer_conf->height[i];\n                info[i].func = K_ROTATION_0;\n                break;\n            case 1:\n                info[i].act_size.width = layer_conf->height[i];\n                info[i].act_size.height = layer_conf->width[i];\n                info[i].func = K_ROTATION_90;\n                break;\n            case 2:\n                info[i].act_size.width = layer_conf->width[i];\n                info[i].act_size.height = layer_conf->height[i];\n                info[i].func = K_ROTATION_180;\n                break;\n            case 3:\n                info[i].act_size.width = layer_conf->height[i];\n                info[i].act_size.height = layer_conf->width[i];\n                info[i].func = K_ROTATION_270;\n                break;\n            case 4:\n                info[i].act_size.width = layer_conf->width[i];\n                info[i].act_size.height = layer_conf->height[i];\n                info[i].func = 0;\n                break;\n            default:\n                printf("invalid roation paramters.\\n");\n                return -1;\n            }\n            total_height += info[i].act_size.height;\n            margin = ((display_height - total_height) / (i+2));\n\t    if ((total_height > display_height) || (info[i].act_size.width > display_width)) {\n                printf("%s, the preview window size[%dx%d] exceeds the display window size[%dx%d].\\n", \\\n                    __func__, info[i].act_size.width, total_height, display_width, display_height);\n                return -1;\n            }\n            printf("%s, width(%d), height(%d), margin(%d), total_height(%d)\\n", \\\n                __func__, info[i].act_size.width, info[i].act_size.height, margin, total_height);\n        }\n    }\n'})}),"\n",(0,t.jsx)(e.h4,{id:"3152-\u8bbe\u7f6e\u56fe\u5c42\u5c5e\u6027",children:"3.15.2 \u8bbe\u7f6e\u56fe\u5c42\u5c5e\u6027"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    for (int i = 0; i < MAX_VO_LAYER_NUM - 1; i++) {\n        if (layer_conf->enable[i]) {\n            info[i].offset.x = (display_width - info[i].act_size.width)/2;\n            info[i].offset.y = margin + relative_height;\n            printf("%s, layer(%d), offset.x(%d), offset.y(%d), relative_height(%d)\\n", __func__, layer_conf->layer[i], info[i].offset.x, info[i].offset.y, relative_height);\n            relative_height += info[i].act_size.height + margin;\n\n            info[i].format = PIXEL_FORMAT_YVU_PLANAR_420;\n            info[i].global_alptha = 0xff;\n\n            vo_creat_layer_test(layer_conf->layer[i], &info[i]);\n        }\n    }\n'})}),"\n",(0,t.jsx)(e.p,{children:"1.\u68c0\u67e5\u56fe\u5c42\u5e8f\u53f7"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    if ((chn_id >= K_MAX_VO_LAYER_NUM) || ((info->func & K_VO_SCALER_ENABLE) && (chn_id != K_VO_LAYER0))\n            || ((info->func != 0) && (chn_id == K_VO_LAYER2)))\n    {\n        printf("input layer num failed \\n");\n        return -1 ;\n    }\n\n'})}),"\n",(0,t.jsx)(e.p,{children:"2.\u8bbe\u7f6e\u5c5e\u6027\u4fe1\u606f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'// set offset\n    attr.display_rect = info->offset;\n    // set act\n    attr.img_size = info->act_size;\n    // sget size\n    info->size = info->act_size.height * info->act_size.width * 3 / 2;\n    //set pixel format\n    attr.pixel_format = info->format;\n    if (info->format != PIXEL_FORMAT_YVU_PLANAR_420)\n    {\n        printf("input pix format failed \\n");\n        return -1;\n    }\n    // set stride\n    attr.stride = (info->act_size.width / 8 - 1) + ((info->act_size.height - 1) << 16);\n    // set function\n    attr.func = info->func;\n    // set scaler attr\n    attr.scaler_attr = info->attr;\n'})}),"\n",(0,t.jsx)(e.p,{children:"3.\u8bbe\u7f6e\u5c5e\u6027\u81f3\u5bf9\u5e94\u56fe\u5c42"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"    kd_mpi_vo_set_video_layer_attr(chn_id, &attr);\n"})}),"\n",(0,t.jsx)(e.p,{children:"4.\u4f7f\u80fd\u5bf9\u5e94\u56fe\u5c42"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"    kd_mpi_vo_enable_video_layer(chn_id);\n"})}),"\n",(0,t.jsx)(e.h3,{id:"316-vi\u8bbe\u5907\u521d\u59cb\u5316",children:"3.16 VI\u8bbe\u5907\u521d\u59cb\u5316"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'ret = kd_mpi_vicap_init(dev_num);//VICAP\u8bbe\u5907\u521d\u59cb\u5316\n    if (ret) {\n        printf("sample_vicap, vicap dev(%d) init failed.\\n", dev_num);\n        goto app_exit;\n    }\n'})}),"\n",(0,t.jsx)(e.h3,{id:"317-\u542f\u52a8vi\u8bbe\u5907",children:"3.17 \u542f\u52a8VI\u8bbe\u5907"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'    ret = kd_mpi_vicap_start_stream(dev_num);//\u542f\u52a8VICAP\u8bbe\u5907\u8f93\u51fa\u6570\u636e\u6d41\n    if (ret) {\n        printf("sample_vicap, vicap dev(%d) start stream failed.\\n", dev_num);\n        goto app_exit;\n    }\n'})})]})}function s(n={}){const{wrapper:e}={...(0,d.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(a,{...n})}):a(n)}},95111:(n,e,i)=>{i.d(e,{Z:()=>t});const t="data:image/png;base64,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"},26447:(n,e,i)=>{i.d(e,{Z:()=>t});const t=i.p+"assets/images/image-20241024154944074-4867f65d164d94283720305242e4e8c3.png"},33687:(n,e,i)=>{i.d(e,{Z:()=>t});const t=i.p+"assets/images/image-20241024155054677-20778e282eea206973a5eca52eaa2555.png"},48997:(n,e,i)=>{i.d(e,{Z:()=>t});const t=i.p+"assets/images/image-20241024155902343-26d00b9527ed64a604ce8fd18c1dc177.png"},11151:(n,e,i)=>{i.d(e,{Z:()=>c,a:()=>r});var t=i(67294);const d={},_=t.createContext(d);function r(n){const e=t.useContext(_);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:r(n.components),t.createElement(_.Provider,{value:e},n.children)}}}]);