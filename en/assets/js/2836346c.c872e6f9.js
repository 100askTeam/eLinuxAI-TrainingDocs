"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4115],{95578:(e,n,d)=>{d.r(n),d.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>a,frontMatter:()=>s,metadata:()=>c,toc:()=>o});var i=d(85893),r=d(11151);const s={sidebar_position:4},l="\u663e\u793a\u5c4f\u5b9e\u9a8c-\u663e\u793a\u4e00\u5f20\u56fe\u50cf",c={id:"CanaanK230/part2/part1/DisplayExperimentDisplayImage",title:"\u663e\u793a\u5c4f\u5b9e\u9a8c-\u663e\u793a\u4e00\u5f20\u56fe\u50cf",description:"\u786c\u4ef6\u8981\u6c42\uff1a",source:"@site/docs/CanaanK230/part2/part1/04_DisplayExperimentDisplayImage.md",sourceDirName:"CanaanK230/part2/part1",slug:"/CanaanK230/part2/part1/DisplayExperimentDisplayImage",permalink:"/en/CanaanK230/part2/part1/DisplayExperimentDisplayImage",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/eLinuxAI-TrainingDocs/tree/main/docs/CanaanK230/part2/part1/04_DisplayExperimentDisplayImage.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"canaanK230Sidebar",previous:{title:"\u6444\u50cf\u5934\u5b9e\u9a8c-\u6355\u83b7\u4e0d\u540c\u5206\u8fa8\u7387\u56fe\u50cf",permalink:"/en/CanaanK230/part2/part1/CameraExperimentDifferentResolutions"},next:{title:"\u663e\u793a\u5c4f\u5b9e\u9a8c-\u663e\u793a\u4e0d\u540c\u5206\u8fa8\u7387\u56fe\u50cf",permalink:"/en/CanaanK230/part2/part1/DisplayExperimentDifferentResolutions"}},t={},o=[{value:"1.\u89c6\u9891\u8f93\u51fa",id:"1\u89c6\u9891\u8f93\u51fa",level:2},{value:"2.\u5e94\u7528\u7a0b\u5e8f\u7f16\u8bd1",id:"2\u5e94\u7528\u7a0b\u5e8f\u7f16\u8bd1",level:2},{value:"2.1 \u65b0\u589e\u7a0b\u5e8f",id:"21-\u65b0\u589e\u7a0b\u5e8f",level:3},{value:"2.1.1 \u65b0\u5efa\u5de5\u7a0b\u6587\u4ef6\u5939",id:"211-\u65b0\u5efa\u5de5\u7a0b\u6587\u4ef6\u5939",level:4},{value:"2.1.2 \u4fee\u6539Makefile",id:"212-\u4fee\u6539makefile",level:4},{value:"2.1.3 \u8fdb\u5165\u5de5\u7a0b\u76ee\u5f55",id:"213-\u8fdb\u5165\u5de5\u7a0b\u76ee\u5f55",level:4},{value:"2.1.4 \u65b0\u5efa\u6e90\u7801\u6587\u4ef6",id:"214-\u65b0\u5efa\u6e90\u7801\u6587\u4ef6",level:4},{value:"2.1.5 \u65b0\u5efaMakefile\u6587\u4ef6",id:"215-\u65b0\u5efamakefile\u6587\u4ef6",level:4},{value:"2.2 \u7a0b\u5e8f\u7f16\u8bd1",id:"22-\u7a0b\u5e8f\u7f16\u8bd1",level:3},{value:"2.2 \u7a0b\u5e8f\u8fd0\u884c",id:"22-\u7a0b\u5e8f\u8fd0\u884c",level:3},{value:"3.\u7a0b\u5e8f\u89e3\u6790",id:"3\u7a0b\u5e8f\u89e3\u6790",level:2},{value:"3.1 \u91cd\u7f6e\u663e\u793a\u8bbe\u5907",id:"31-\u91cd\u7f6e\u663e\u793a\u8bbe\u5907",level:3},{value:"3.2 \u663e\u793a\u56fe\u50cf",id:"32-\u663e\u793a\u56fe\u50cf",level:3},{value:"3.3.1 \u8bbe\u7f6e\u53e0\u52a0\u663e\u793a\u5c3a\u5bf8",id:"331-\u8bbe\u7f6e\u53e0\u52a0\u663e\u793a\u5c3a\u5bf8",level:4},{value:"3.3.2 \u663e\u793a\u5c4f\u521d\u59cb\u5316",id:"332-\u663e\u793a\u5c4f\u521d\u59cb\u5316",level:4},{value:"3.3.3 \u521b\u5efa\u7f13\u51b2\u6c60",id:"333-\u521b\u5efa\u7f13\u51b2\u6c60",level:4},{value:"3.3.4 \u6839\u636e\u683c\u5f0f\u8ba1\u7b97\u663e\u793a\u5927\u5c0f",id:"334-\u6839\u636e\u683c\u5f0f\u8ba1\u7b97\u663e\u793a\u5927\u5c0f",level:4},{value:"3.3.4 \u8bbe\u7f6e\u63d2\u5165\u5e27",id:"334-\u8bbe\u7f6e\u63d2\u5165\u5e27",level:4},{value:"3.3.5 \u586b\u5145\u663e\u793a\u5e27",id:"335-\u586b\u5145\u663e\u793a\u5e27",level:4},{value:"3.3.6 \u89c6\u9891\u5e27\u63d2\u5165VO\u901a\u9053",id:"336-\u89c6\u9891\u5e27\u63d2\u5165vo\u901a\u9053",level:4},{value:"3.3.7 \u9000\u51fa\u4e0e\u6e05\u7406\u64cd\u4f5c",id:"337-\u9000\u51fa\u4e0e\u6e05\u7406\u64cd\u4f5c",level:4}];function h(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"\u663e\u793a\u5c4f\u5b9e\u9a8c-\u663e\u793a\u4e00\u5f20\u56fe\u50cf",children:"\u663e\u793a\u5c4f\u5b9e\u9a8c-\u663e\u793a\u4e00\u5f20\u56fe\u50cf"}),"\n",(0,i.jsx)(n.p,{children:"\u786c\u4ef6\u8981\u6c42\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"DshanPI-CanMV\u5f00\u53d1\u677f"}),"\n",(0,i.jsx)(n.li,{children:"Type-C\u6570\u636e\u7ebf x2"}),"\n",(0,i.jsx)(n.li,{children:"MIPI\u663e\u793a\u5c4f/HDMI\u663e\u793a\u5c4f"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5f00\u53d1\u73af\u5883\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ubuntu20.04"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8d44\u6599\u5177\u4f53\u4f4d\u7f6e\uff1a ",(0,i.jsx)(n.code,{children:"09_RTSmart+Linux\u53cc\u7cfb\u7edf\u8d44\u6599\\02_\u591a\u5a92\u4f53\u5e94\u7528\u793a\u4f8b\u6e90\u7801\\03_sample_vo*"})]}),"\n",(0,i.jsx)(n.h2,{id:"1\u89c6\u9891\u8f93\u51fa",children:"1.\u89c6\u9891\u8f93\u51fa"}),"\n",(0,i.jsx)(n.p,{children:"VO\uff08Video Output\uff0c\u89c6\u9891\u8f93\u51fa\uff09\u6a21\u5757\u4e3b\u52a8\u4ece\u5185\u5b58\u76f8\u5e94\u4f4d\u7f6e\u8bfb\u53d6\u89c6\u9891\u548c\u56fe\u5f62\u6570\u636e\uff0c\u5e76\u901a\u8fc7\u76f8\u5e94\u7684\u663e\u793a\u8bbe\u5907\u8f93\u51fa\u89c6\u9891\u548c\u56fe\u5f62\u3002\u82af\u7247\u652f\u6301\u7684\u663e\u793a/\u56de\u5199\u8bbe\u5907\u3001\u89c6\u9891\u5c42\u548c\u56fe\u5f62\u5c42\u60c5\u51b5\u3002"}),"\n",(0,i.jsx)(n.p,{children:"LAYER\u5c42\u652f\u6301\uff1a"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{}),(0,i.jsx)(n.th,{children:"LAYER0"}),(0,i.jsx)(n.th,{children:"LAYER1"}),(0,i.jsx)(n.th,{children:"LAYER2"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u8f93\u5165\u683c\u5f0f"}),(0,i.jsx)(n.td,{children:"YUV420 NV12"}),(0,i.jsx)(n.td,{children:"YUV420 NV12"}),(0,i.jsx)(n.td,{children:"YUV420 NV12 YUV422 NV16 ?"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u6700\u5927\u5206\u8fa8\u7387"}),(0,i.jsx)(n.td,{children:"1920x1080"}),(0,i.jsx)(n.td,{children:"1920x1080"}),(0,i.jsx)(n.td,{children:"1920x1080"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u53e0\u52a0\u663e\u793a"}),(0,i.jsx)(n.td,{children:"\u652f\u6301\u53ef\u914d\u7f6e\u53e0\u52a0\u987a\u5e8f"}),(0,i.jsx)(n.td,{children:"\u652f\u6301\u53ef\u914d\u7f6e\u53e0\u52a0\u987a\u5e8f"}),(0,i.jsx)(n.td,{children:"\u652f\u6301\u53ef\u914d\u7f6e\u53e0\u52a0\u987a\u5e8f"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Rotation"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"-"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Scaler"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"-"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Mirror"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"-"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Gray"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"-"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u72ec\u7acb\u5f00\u5173"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"\u221a"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"OSD \u5c42\u652f\u6301"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{}),(0,i.jsx)(n.th,{children:"OSD0"}),(0,i.jsx)(n.th,{children:"OSD1"}),(0,i.jsx)(n.th,{children:"OSD2"}),(0,i.jsx)(n.th,{children:"OSD3"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u8f93\u5165\u683c\u5f0f"}),(0,i.jsx)(n.td,{children:"RGB888 RGB565 ARGB8888 Monochrome-8-bit RGB4444 RGB1555"}),(0,i.jsx)(n.td,{children:"RGB888 RGB565 ARGB8888 Monochrome-8-bit RGB4444 RGB1555"}),(0,i.jsx)(n.td,{children:"RGB888 RGB565 ARGB8888 Monochrome-8-bit RGB4444 RGB1555"}),(0,i.jsx)(n.td,{children:"RGB888 RGB565 ARGB8888 Monochrome-8-bit RGB4444 RGB1555"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u6700\u5927\u5206\u8fa8\u7387"}),(0,i.jsx)(n.td,{children:"1920x1080"}),(0,i.jsx)(n.td,{children:"1920x1080"}),(0,i.jsx)(n.td,{children:"1920x1080"}),(0,i.jsx)(n.td,{children:"1920x1080"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u53e0\u52a0\u663e\u793a"}),(0,i.jsx)(n.td,{children:"\u652f\u6301\u53ef\u914d\u7f6e\u53e0\u52a0\u987a\u5e8f"}),(0,i.jsx)(n.td,{children:"\u652f\u6301\u53ef\u914d\u7f6e\u53e0\u52a0\u987a\u5e8f"}),(0,i.jsx)(n.td,{children:"\u652f\u6301\u53ef\u914d\u7f6e\u53e0\u52a0\u987a\u5e8f"}),(0,i.jsx)(n.td,{children:"\u652f\u6301\u53ef\u914d\u7f6e\u53e0\u52a0\u987a\u5e8f"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"ARGB 265 \u7b49\u7ea7ALPHA"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"\u221a"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u72ec\u7acb\u5f00\u5173"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"\u221a"}),(0,i.jsx)(n.td,{children:"\u221a"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"2\u5e94\u7528\u7a0b\u5e8f\u7f16\u8bd1",children:"2.\u5e94\u7528\u7a0b\u5e8f\u7f16\u8bd1"}),"\n",(0,i.jsx)(n.h3,{id:"21-\u65b0\u589e\u7a0b\u5e8f",children:"2.1 \u65b0\u589e\u7a0b\u5e8f"}),"\n",(0,i.jsx)(n.h4,{id:"211-\u65b0\u5efa\u5de5\u7a0b\u6587\u4ef6\u5939",children:"2.1.1 \u65b0\u5efa\u5de5\u7a0b\u6587\u4ef6\u5939"}),"\n",(0,i.jsx)(n.p,{children:"\u5728k230_sdk/src/big/mpp/userapps/sample\u76ee\u5f55\u4e0b\u65b0\u5efa\u5de5\u7a0b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"mkdir sample_vo_100ask\n"})}),"\n",(0,i.jsx)(n.h4,{id:"212-\u4fee\u6539makefile",children:"2.1.2 \u4fee\u6539Makefile"}),"\n",(0,i.jsx)(n.p,{children:"\u4fee\u6539k230_sdk/src/big/mpp/userapps/sample\u76ee\u5f55\u4e0b\u7684Makefile\u6587\u4ef6\uff0c\u65b0\u589esample_vicap_100ask\u5de5\u7a0b\u7684\u7f16\u8bd1\u89c4\u5219"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@cd sample_vo_100ask; make || exit 1\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image-20241023152648041",src:d(7544).Z+"",width:"1561",height:"632"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@cd sample_vo_100ask; make clean\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image-20241023152708325",src:d(19576).Z+"",width:"1458",height:"422"})}),"\n",(0,i.jsx)(n.h4,{id:"213-\u8fdb\u5165\u5de5\u7a0b\u76ee\u5f55",children:"2.1.3 \u8fdb\u5165\u5de5\u7a0b\u76ee\u5f55"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cd sample_vicap_100ask/\n"})}),"\n",(0,i.jsx)(n.h4,{id:"214-\u65b0\u5efa\u6e90\u7801\u6587\u4ef6",children:"2.1.4 \u65b0\u5efa\u6e90\u7801\u6587\u4ef6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"vi sample_vo_100ask.c\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u586b\u5165\u6e90\u7801\u3002"}),"\n",(0,i.jsx)(n.p,{children:"2.1.5 \u65b0\u5efa\u6e90\u7801\u5934\u6587\u4ef6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"vi vo_test_case.h\n"})}),"\n",(0,i.jsx)(n.h4,{id:"215-\u65b0\u5efamakefile\u6587\u4ef6",children:"2.1.5 \u65b0\u5efaMakefile\u6587\u4ef6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"vi Makefiel\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u586b\u5165\u4e00\u4e0b\u5185\u5bb9\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'include $(MPP_SRC_DIR)/userapps/sample/mpp.mk\ninclude $(MPP_SRC_DIR)/userapps/sample/rt-smart.mk\n\nCURRECT_DIR_NAME=$(shell basename `pwd`)\nLOCAL_SRC_DIR = $(shell pwd)\nBIN = $(MPP_SRC_DIR)/userapps/sample/elf/$(CURRECT_DIR_NAME).elf\nLIBPATH = $(MPP_LIB_PATH)\nLIBS = $(MPP_LIBS)\n\nLOCAL_CFLAGS = -I$(LOCAL_SRC_DIR)\n\nSRCS = $(wildcard $(LOCAL_SRC_DIR)/*.c)\n\nOBJS = $(patsubst %.c,%.o,$(SRCS))\n\nall: $(BIN)\n\t@-rm -f $(OBJS)\n\techo "${PWD}/Makefile all"\n\n$(OBJS): %.o : %.c\n\t@$(CC) $(CC_CFLAGS) $(LOCAL_CFLAGS) $(BSP_CFLGAS) $(RTSMART_CFLAGS) $(MPP_USER_CFLGAS) -c $< -o $@\n\n$(BIN): $(OBJS)\n\t$(CC) -o $(BIN) $(LINKFLAG) -Wl,--whole-archive -Wl,--no-whole-archive -n --static $(OBJS) -L$(LIBPATH) -Wl,--start-group $(LIBS) -Wl,--end-group\n\nclean:\n\techo "${PWD}/Makefile clean"\n\t-rm -rf $(BIN)\n\t-rm -f $(OBJS)\n\n.PHONY: all clean\n'})}),"\n",(0,i.jsx)(n.h3,{id:"22-\u7a0b\u5e8f\u7f16\u8bd1",children:"2.2 \u7a0b\u5e8f\u7f16\u8bd1"}),"\n",(0,i.jsx)(n.p,{children:"1.\u8fdb\u5165K230SDK\u76ee\u5f55"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cd ~/k230_sdk\n"})}),"\n",(0,i.jsx)(n.p,{children:"2.\u8fdb\u5165Docker\u73af\u5883"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo docker run -u root -it -v $(pwd):$(pwd) -v $(pwd)/toolchain:/opt/toolchain -w $(pwd) ghcr.io/kendryte/k230_sdk /bin/bash\n"})}),"\n",(0,i.jsx)(n.p,{children:"3.\u914d\u7f6e\u677f\u7ea7\u578b\u53f7"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"make CONF=k230_canmv_dongshanpi_defconfig prepare_memory\t\n"})}),"\n",(0,i.jsx)(n.p,{children:"4.\u7f16\u8bd1\u7a0b\u5e8f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"make mpp-apps\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u7b49\u5f85\u7f16\u8bd1\u5b8c\u6210\uff0c\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u53ef\u6267\u884c\u7a0b\u5e8f",(0,i.jsx)(n.code,{children:"sample_vo_100ask.elf"}),"\u4f1a\u751f\u6210\u5728",(0,i.jsx)(n.code,{children:"k230_sdk/src/big/mpp/userapps/sample/elf"}),"\u76ee\u5f55\u4e0b\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528ADB\u5c06\u53ef\u6267\u884c\u7a0b\u5e8f\u4f20\u8f93\u81f3\u5f00\u53d1\u677f\u4e2d"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"adb push src/big/mpp/userapps/sample/elf/sample_vo_100ask.elf /sharefs/app\n"})}),"\n",(0,i.jsx)(n.h3,{id:"22-\u7a0b\u5e8f\u8fd0\u884c",children:"2.2 \u7a0b\u5e8f\u8fd0\u884c"}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528\u4e32\u53e3\u8f6f\u4ef6\u8bbf\u95ee\u5f00\u53d1\u677f\u7684\u5927\u6838\u4e32\u53e3\u7ec8\u7aef\u3002"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u6ca1\u6709\u5173\u95ed\u5f00\u673a\u81ea\u542f\u7a0b\u5e8f\uff0c\u53ef\u6309\u4e0bq+\u56de\u8f66\u952e\u53ef\u9000\u51fa\u5f00\u673a\u81ea\u542f\u7a0b\u5e8f\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"1.\u8fdb\u5165\u53ef\u6267\u884c\u6587\u4ef6\u76ee\u5f55"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cd /sharefs/app\n"})}),"\n",(0,i.jsx)(n.p,{children:"2.\u8fd0\u884c\u7a0b\u5e8f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"./sample_vo_100ask.elf\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u6267\u884c\u5b8c\u6210\u540e\u6548\u679c\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image-20241023153026323",src:d(90815).Z+"",width:"1235",height:"239"})}),"\n",(0,i.jsx)(n.p,{children:"\u6309\u4e0b\u56de\u8f66\u540e\uff0c\u5373\u53ef\u9000\u51fa\u7a0b\u5e8f\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"3\u7a0b\u5e8f\u89e3\u6790",children:"3.\u7a0b\u5e8f\u89e3\u6790"}),"\n",(0,i.jsx)(n.h3,{id:"31-\u91cd\u7f6e\u663e\u793a\u8bbe\u5907",children:"3.1 \u91cd\u7f6e\u663e\u793a\u8bbe\u5907"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"    // rst display subsystem\n    kd_display_reset();\n    // set hardware reset;\n    kd_display_set_backlight();\n"})}),"\n",(0,i.jsx)(n.h3,{id:"32-\u663e\u793a\u56fe\u50cf",children:"3.2 \u663e\u793a\u56fe\u50cf"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"    sample_connector_osd_install_frame(ST7701_V1_MIPI_2LAN_480X800_30FPS);\n"})}),"\n",(0,i.jsx)(n.h4,{id:"331-\u8bbe\u7f6e\u53e0\u52a0\u663e\u793a\u5c3a\u5bf8",children:"3.3.1 \u8bbe\u7f6e\u53e0\u52a0\u663e\u793a\u5c3a\u5bf8"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"    osd.act_size.width = 320 ;\n    osd.act_size.height = 240;\n    osd.offset.x = 80;\n    osd.offset.y = 280;\n    osd.global_alptha = 0xff;\n    osd.format = PIXEL_FORMAT_ARGB_8888;\n"})}),"\n",(0,i.jsx)(n.h4,{id:"332-\u663e\u793a\u5c4f\u521d\u59cb\u5316",children:"3.3.2 \u663e\u793a\u5c4f\u521d\u59cb\u5316"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sample_connector_init(type);//LCD INIT\n"})}),"\n",(0,i.jsx)(n.p,{children:"1.\u83b7\u53d6\u8fde\u63a5\u5668\u4fe1\u606f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'    ret = kd_mpi_get_connector_info(connector_type, &connector_info);\n    if (ret) {\n        printf("sample_vicap, the sensor type not supported!\\n");\n        return ret;\n    }\n'})}),"\n",(0,i.jsx)(n.p,{children:"2.\u83b7\u53d6\u8fde\u63a5\u5668\u8bbe\u5907\u8282\u70b9"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'    connector_fd = kd_mpi_connector_open(connector_info.connector_name);\n    if (connector_fd < 0) {\n        printf("%s, connector open failed.\\n", __func__);\n        return K_ERR_VO_NOTREADY;\n    }\n'})}),"\n",(0,i.jsx)(n.p,{children:"3.\u8bbe\u7f6e\u8fde\u63a5\u5668\u7535\u6e90"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"    kd_mpi_connector_power_set(connector_fd, 1);\n"})}),"\n",(0,i.jsx)(n.p,{children:"4.\u521d\u59cb\u5316\u8fde\u63a5\u5668"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"    kd_mpi_connector_init(connector_fd, connector_info);\n"})}),"\n",(0,i.jsx)(n.h4,{id:"333-\u521b\u5efa\u7f13\u51b2\u6c60",children:"3.3.3 \u521b\u5efa\u7f13\u51b2\u6c60"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"vo_creat_private_poll();//creat Memery Poll\n"})}),"\n",(0,i.jsx)(n.p,{children:"1.\u8bbe\u7f6e\u7f13\u51b2\u533a\u914d\u7f6e"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\tconfig.max_pool_cnt = 10;//Number of cache pools that can be accommodated in the whole system.\n    config.comm_pool[0].blk_cnt = 20;\n    config.comm_pool[0].blk_size = PRIVATE_POLL_SZE;          // osd0 - 3 argb 320 x 240\n    printf("PRIVATE_POLL_SZE = %d\\n",PRIVATE_POLL_SZE);\n    config.comm_pool[0].mode = VB_REMAP_MODE_NOCACHE;//VB_REMAP_MODE_NOCACHE; \n\n    ret = kd_mpi_vb_set_config(&config);//Set MPP video cache pool properties\n'})}),"\n",(0,i.jsx)(n.p,{children:"2.\u521d\u59cb\u5316\u7f13\u51b2\u533a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"ret = kd_mpi_vb_init();//Initialize MPP video cache pool\n"})}),"\n",(0,i.jsx)(n.p,{children:"3.\u521b\u5efa\u89c6\u9891\u7f13\u51b2\u6c60"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\tmemset(&pool_config, 0, sizeof(pool_config));\n    pool_config.blk_cnt = PRIVATE_POLL_NUM;\n    pool_config.blk_size = PRIVATE_POLL_SZE;\n    pool_config.mode = VB_REMAP_MODE_NONE;\n    //Create a video cache pool and return a valid cache pool ID number.\n    pool_id = kd_mpi_vb_create_pool(&pool_config);      // osd0 - 3 argb 320 x 240\n"})}),"\n",(0,i.jsx)(n.p,{children:"4.\u8bb0\u5f55\u7f13\u51b2\u6c60ID"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"    g_pool_id = pool_id;\n"})}),"\n",(0,i.jsx)(n.h4,{id:"334-\u6839\u636e\u683c\u5f0f\u8ba1\u7b97\u663e\u793a\u5927\u5c0f",children:"3.3.4 \u6839\u636e\u683c\u5f0f\u8ba1\u7b97\u663e\u793a\u5927\u5c0f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"vo_creat_osd_test(osd_id, &osd);\n"})}),"\n",(0,i.jsx)(n.p,{children:"1.\u8bbe\u7f6e\u900f\u660e\u5ea6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"attr.global_alptha = info->global_alptha;\n"})}),"\n",(0,i.jsx)(n.p,{children:"2.\u6839\u636e\u683c\u5f0f\u8bbe\u7f6e\u5927\u5c0f\u548c\u6b65\u5e45"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"    if (info->format == PIXEL_FORMAT_ABGR_8888 || info->format == PIXEL_FORMAT_ARGB_8888)\n    {\n        info->size = info->act_size.width  * info->act_size.height * 4;\n        info->stride  = info->act_size.width * 4 / 8;\n    }\n"})}),"\n",(0,i.jsx)(n.p,{children:"3.\u8bbe\u7f6e\u53e0\u52a0\u663e\u793a\u7684\u5c5e\u6027"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"    attr.stride = info->stride;\n    attr.pixel_format = info->format;\n    attr.display_rect = info->offset;\n    attr.img_size = info->act_size;\n    kd_mpi_vo_set_video_osd_attr(osd, &attr);//Set osd layer properties\n"})}),"\n",(0,i.jsx)(n.p,{children:"4.\u5f00\u542fOSD\u5c42"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"kd_mpi_vo_osd_enable(osd);//open osd layer\n"})}),"\n",(0,i.jsx)(n.h4,{id:"334-\u8bbe\u7f6e\u63d2\u5165\u5e27",children:"3.3.4 \u8bbe\u7f6e\u63d2\u5165\u5e27"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:" \tmemset(&vf_info, 0, sizeof(vf_info));\n    vf_info.v_frame.width = osd.act_size.width;\n    vf_info.v_frame.height = osd.act_size.height;\n    vf_info.v_frame.stride[0] = osd.act_size.width;\n    vf_info.v_frame.pixel_format = osd.format;\n    block = vo_insert_frame(&vf_info, &pic_vaddr);//\u5c06\u7533\u8bf7\u7684\u7f13\u51b2\u533a\u5730\u5740\u7ed9pic_vaddr\n"})}),"\n",(0,i.jsx)(n.p,{children:"1.\u8bbe\u7f6e\u5e27\u5927\u5c0f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"if (vf_info->v_frame.pixel_format == PIXEL_FORMAT_ABGR_8888 || vf_info->v_frame.pixel_format == PIXEL_FORMAT_ARGB_8888)\n        size = vf_info->v_frame.height * vf_info->v_frame.width * 4;\n        \nsize = size + 4096;         // \u5f3a\u52364K\u5bf9\u9f50\n"})}),"\n",(0,i.jsx)(n.p,{children:"2.\u6839\u636e\u7f13\u51b2\u6c60ID\u83b7\u53d6\u7f13\u51b2\u533a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:' handle = kd_mpi_vb_get_block(g_pool_id, size, NULL);//Get a cache block in user mode\n    if (handle == VB_INVALID_HANDLE)\n    {\n        printf("%s get vb block error\\n", __func__);\n        return K_FAILED;\n    }\n'})}),"\n",(0,i.jsx)(n.p,{children:"3.\u83b7\u53d6\u7f13\u51b2\u533a\u7684\u7269\u7406\u5730\u5740"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'    phys_addr = kd_mpi_vb_handle_to_phyaddr(handle);//Get block phy Addr\n    if (phys_addr == 0)\n    {\n        printf("%s get phys addr error\\n", __func__);\n        return K_FAILED;\n    }\n'})}),"\n",(0,i.jsx)(n.p,{children:"4.\u83b7\u53d6\u7f13\u51b2\u533a\u7684\u865a\u62df\u5730\u5740"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"virt_addr = (k_u32 *)kd_mpi_sys_mmap(phys_addr, size);//phy addr mmap to vir addr\n"})}),"\n",(0,i.jsx)(n.p,{children:"5.\u5c06\u83b7\u53d6\u7684\u4fe1\u606f\u4f20\u51fa"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\tvf_info->mod_id = K_ID_VO; //video output device\n    vf_info->pool_id = g_pool_id; \n    vf_info->v_frame.phys_addr[0] = phys_addr;\n    if (vf_info->v_frame.pixel_format == PIXEL_FORMAT_YVU_PLANAR_420)\n        vf_info->v_frame.phys_addr[1] = phys_addr + (vf_info->v_frame.height * vf_info->v_frame.stride[0]);\n    *pic_vaddr = virt_addr;\n"})}),"\n",(0,i.jsx)(n.h4,{id:"335-\u586b\u5145\u663e\u793a\u5e27",children:"3.3.5 \u586b\u5145\u663e\u793a\u5e27"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"vo_osd_filling_color(&osd, pic_vaddr);\n"})}),"\n",(0,i.jsx)(n.p,{children:"1.\u83b7\u53d6\u865a\u62df\u5730\u5740"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"k_u32 *temp_addr = (k_u32 *)pic_vaddr;\n"})}),"\n",(0,i.jsx)(n.p,{children:"2.\u586b\u5145\u865a\u62df\u5730\u5740\u7684\u503c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:" else if (osd->format == PIXEL_FORMAT_ARGB_8888)\n    {\n        for (i = 0; i < osd->size / sizeof(k_u32) ; i++)\n        {\n            //temp_addr[i] = 0x00FF00ff;//COLOR_BGRA_GREEN;\n            temp_addr[i] = 0x0000FFFF;//COLOR_BGRA_RED;\n            //temp_addr[i] = 0x0000FFFF;//COLOR_BGRA_BLUE;\n        }\n    }\n"})}),"\n",(0,i.jsx)(n.h4,{id:"336-\u89c6\u9891\u5e27\u63d2\u5165vo\u901a\u9053",children:"3.3.6 \u89c6\u9891\u5e27\u63d2\u5165VO\u901a\u9053"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"kd_mpi_vo_chn_insert_frame(osd_id + 3, &vf_info);\n"})}),"\n",(0,i.jsx)(n.h4,{id:"337-\u9000\u51fa\u4e0e\u6e05\u7406\u64cd\u4f5c",children:"3.3.7 \u9000\u51fa\u4e0e\u6e05\u7406\u64cd\u4f5c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"    kd_mpi_vo_osd_disable(osd_id);//close osd layer\n    kd_mpi_vb_release_block(block);//release user block\n    kd_mpi_vb_destory_pool(g_pool_id);//destory video Memery pool\n    kd_mpi_vb_exit();\n"})})]})}function a(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},7544:(e,n,d)=>{d.d(n,{Z:()=>i});const i=d.p+"assets/images/image-20241023152648041-2cebdaf5ca1b0de3b84110f92ab2cfe0.png"},19576:(e,n,d)=>{d.d(n,{Z:()=>i});const i=d.p+"assets/images/image-20241023152708325-90e889a20b0742a9f820dbfef67924b0.png"},90815:(e,n,d)=>{d.d(n,{Z:()=>i});const i=d.p+"assets/images/image-20241023153026323-a456635a64512bcb388a015da92bf2f1.png"},11151:(e,n,d)=>{d.d(n,{Z:()=>c,a:()=>l});var i=d(67294);const r={},s=i.createContext(r);function l(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);